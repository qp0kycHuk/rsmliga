<div class="lk-form-dialog fancybox-content card p-6">
	<div class="form-dialog-header mb-6">
		<div class="form-dialog-title title text-subtitle-2 text-md-h6">Добавить соревнование</div>
	</div>
	<form class="form-dialog-content">
		<div class="form-dialog-fields">
			<label class="form-field w-100">
				<div class="text-body-2 text--demibold mb-2">Название</div>
				<div class="form-input-cover">
					<input type="text" class="form-input" name="name" required>
				</div>
			</label>

			<label class="form-field w-100 mt-4">
				<div class="text-body-2 text--demibold mb-2">Сезон</div>
				<div class="form-input-cover">
					<select name="" class="form-input pr-8">
						<option value="">2021-2022</option>
						<option value="">2021-2023</option>
						<option value="">2021-2024</option>
						<option value="">2021-2025</option>
					</select>
					<div class="form-select-icon">
						<svg class="icon" style="transform: rotateZ(90deg);">
							<use xlink:href="img/icons.svg#triangle-right" />
						</svg>
					</div>
				</div>
			</label>


			<div class="text-body-2 text--demibold mb-2  mt-6">Этапы</div>
			<div class="bd-bottom"></div>
			<label class="form-field w-100 mt-4 -step-field-">
				<div class="text-body-2 text--demibold mb-2"><span class="-step-number-">1</span> этап</div>
				<div class="form-input-cover">
					<div class="form-input-cover">
						<select name="" class="form-input pr-8 -step-input-">
							<option value="">Муниципальный</option>
							<option value="">Внутришкольный</option>
						</select>
						<div class="form-select-icon">
							<svg class="icon" style="transform: rotateZ(90deg);">
								<use xlink:href="img/icons.svg#triangle-right" />
							</svg>
						</div>
					</div>
				</div>
			</label>
			<button class="btn btn--primary btn--link mt-1 -add-step-" type="button">Добавить еще</button>


		</div>
		<div class="grid">
			<div class="grid-col-md-6">
				<button class="form-btn btn btn--primary btn--fill mt-5 w-100">Отправить</button>
			</div>
			<div class="grid-col-md-6">
				<button class="form-btn btn btn--primary btn--light mt-5 w-100" data-fancybox-close
					type="button">Отмена</button>
			</div>
		</div>
		<div class="form-agree text-small fade-60 mt-5">Отправляя форму Вы даете согласие на обработку Ваших персональных
			данных</div>
	</form>
</div>



<script>
	(() => {
		let field = null;
		let socCounter = 1;
		let maxSoc = 5
		let number = 1

		document.querySelector('.-add-step-').addEventListener('click', (event) => {
			if (socCounter >= maxSoc) return
			if (!field) {
				field = document.querySelector('.-step-field-');
			}

			const addBtn = event.target
			const clone = field.cloneNode(true);
			clone.querySelector('.-step-input-').value = ''

			number++
			clone.querySelector('.-step-number-').textContent = number

			const close = document.createElement('button');
			close.type = 'button'
			close.className = 'btn btn--red btn--fill btn-fab btn-small ml-2';
			close.innerHTML = '<svg class="icon text-small-2"><use xlink:href="img/icons.svg#cross" /></svg>';
			close.addEventListener('click', (event) => {
				setTimeout(() => {
					clone.parentElement.removeChild(clone)
					socCounter--
					if (socCounter < maxSoc) addBtn.disabled = false
				}, 100)
			})

			clone.querySelector('.form-input-cover').appendChild(close);

			addBtn.insertAdjacentElement('beforebegin', clone);
			socCounter++

			if (socCounter >= maxSoc) addBtn.disabled = true
		})
	})();

</script>