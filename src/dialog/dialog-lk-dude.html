<div class="lk-form-dialog fancybox-content card p-6">
	<div class="form-dialog-header mb-6">
		<div class="form-dialog-title title text-subtitle-2 text-md-h6">Добавить представителя</div>
	</div>
	<form class="form-dialog-content">
		<div class="form-dialog-fields">
			<label class="dialog-dude-avatar mb-6">
				<input type="file" accept="image/*" class="-dude-avatar-">
				<div class="dialog-dude-avatar__img"></div>
				<div class="dialog-dude-avatar__btns dialog-dude-avatar__add">
					<div class="btn btn--primary btn--link" type="button">Добавить фото</div>
				</div>
				<div class="dialog-dude-avatar__btns dialog-dude-avatar__edit">
					<div class="btn btn--text btn--link" type="button">Заменить</div>
					<button class="btn btn--primary btn--link ml-4 -dude-avatar-remove-" type="button">Удалить</button>
				</div>
			</label>
			<div class="dialog-error mb-5">
				Данный представитель уже создан
			</div>
			<label class="form-field w-100">
				<div class="text-body-2 text--demibold mb-2">Фамилия <span class="color-primary">*</span></div>
				<div class="form-input-cover">
					<input type="text" class="form-input" name="name" required>
				</div>
			</label>
			<label class="form-field w-100 mt-4">
				<div class="text-body-2 text--demibold mb-2">Имя <span class="color-primary">*</span></div>
				<div class="form-input-cover">
					<input type="text" class="form-input" name="name" required>
				</div>
			</label>
			<label class="form-field w-100 mt-4">
				<div class="text-body-2 text--demibold mb-2">Отчество <span class="color-primary">*</span></div>
				<div class="form-input-cover">
					<input type="text" class="form-input" name="name" required>
				</div>
			</label>
			<label class="form-field w-100 mt-4">
				<div class="text-body-2 text--demibold mb-2">Дата рождения <span class="color-primary">*</span></div>
				<div class="form-input-cover">
					<input type="text" data-datepicker class="form-input" name="name" readonly required>
				</div>
			</label>
			<label class="form-field w-100 mt-4">
				<div class="text-body-2 text--demibold mb-2">Должность</div>
				<div class="form-input-cover">
					<input type="text" class="form-input" name="name" required>
				</div>
			</label>
			<label class="form-field w-100 mt-4">
				<div class="text-body-2 text--demibold mb-2">Номер телефона</div>
				<div class="form-input-cover">
					<input type="tel" class="form-input" name="name" required>
				</div>
			</label>
			<label class="form-field w-100 mt-4">
				<div class="text-body-2 text--demibold mb-2">E-mail</div>
				<div class="form-input-cover">
					<input type="email" class="form-input" name="email" required>
				</div>
			</label>



		</div>
		<div class="grid">
			<div class="grid-col-md-6">
				<button class="form-btn btn btn--primary btn--fill mt-5 w-100">Отправить</button>
			</div>
			<div class="grid-col-md-6">
				<button class="form-btn btn btn--primary btn--light mt-5 w-100" data-fancybox-close
					type="button">Отмена</button>
			</div>
		</div>
		<div class="form-agree text-small fade-60 mt-5">Отправляя форму Вы даете согласие на обработку Ваших персональных
			данных</div>
	</form>
</div>



<script>
	(() => {
		function createImage() {
			const img = document.createElement('img')
			img.src = ''
			return img
		}

		document.querySelector('.-dude-avatar-').addEventListener('change', (event) => {
			const cover = event.target.closest('.dialog-dude-avatar')
			const imgCover = cover.querySelector('.dialog-dude-avatar__img')
			const target = imgCover.querySelector('img') ? imgCover.querySelector('img') : createImage()
			imgCover.appendChild(target)

			if (target.getAttribute('data-initial') == null) {
				target.setAttribute('data-initial', '')
			}

			const file = event.target.files[0]

			if (file) {
				let reader = new FileReader();
				reader.addEventListener("load", function (event) {
					target.src = event.target.result
					checkAdded()
				}, false);
				reader.readAsDataURL(file);
			} else {
				target.src = target.getAttribute('data-initial')
				checkAdded()
			}

			function checkAdded() {

				if (target.getAttribute('src') == '') {
					cover.classList.remove('added')
				} else {
					cover.classList.add('added')

				}
			}




		})

		document.querySelector('.-dude-avatar-remove-').addEventListener('click', (event) => {
			const cover = event.target.closest('.dialog-dude-avatar')
			const imgCover = cover.querySelector('.dialog-dude-avatar__img')
			const input = cover.querySelector('input')
			const target = imgCover.querySelector('img')
			target.src = ''
			input.value = null
			checkAdded()

			function checkAdded() {

				if (target.getAttribute('src') == '') {
					cover.classList.remove('added')
				} else {
					cover.classList.add('added')

				}
			}
		})
	})();

</script>